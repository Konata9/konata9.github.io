

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/en/img/fluid.png">
  <link rel="icon" href="/en/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Konata">
  <meta name="keywords" content="Konata,Konata9,blog,share,record,technology">
  
    <meta name="description" content="In our current workflow, Bitbucket serves both as a code repository and a private NPM repository. Installing dependencies via git+ssh and specifying a tag is very convenient for pure JavaScript projec">
<meta property="og:type" content="article">
<meta property="og:title" content="Improving Git Flow for Managing Private TypeScript Dependencies on Bitbucket">
<meta property="og:url" content="https://konta9.github.io/en/2024/02/11/2024/improve-git-flow-to-manage-ts-dependency-on-bitbucket-as-private-npm/index.html">
<meta property="og:site_name" content="Konata&#39;s Secret Base">
<meta property="og:description" content="In our current workflow, Bitbucket serves both as a code repository and a private NPM repository. Installing dependencies via git+ssh and specifying a tag is very convenient for pure JavaScript projec">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://konta9.github.io/en/images/2024/improved-git-flow.jpg">
<meta property="article:published_time" content="2024-02-11T08:04:03.000Z">
<meta property="article:modified_time" content="2024-02-12T03:36:10.740Z">
<meta property="article:author" content="Konata">
<meta property="article:tag" content="git">
<meta property="article:tag" content="npm">
<meta property="article:tag" content="nodejs">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://konta9.github.io/en/images/2024/improved-git-flow.jpg">
  
  
  
  <title>Improving Git Flow for Managing Private TypeScript Dependencies on Bitbucket - Konata&#39;s Secret Base</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/en/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/en/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/en/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/en/css/custom.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"konta9.github.io","root":"/en/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":"G-HZE2KZXTWN"},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"BirbQk2IcLjcATgSrzYGJHe7-MdYXbMMI","app_key":"WrRy9Sjv7hCFj1jO9Tm10BYi","server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/en/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/en/js/utils.js" ></script>
  <script  src="/en/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-HZE2KZXTWN", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-HZE2KZXTWN');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/en/atom.xml" title="Konata's Secret Base" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/en/">
      <strong>Konata&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/en/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/en/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/en/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/en/atom.xml" target="_self">
                <i class="iconfont icon-rss-fill"></i>
                <span>RSS</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/en/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://konata9.github.io/" target="_self">
                <i class="iconfont icon-message-multi-language-fill"></i>
                <span>简体中文</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/en/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Improving Git Flow for Managing Private TypeScript Dependencies on Bitbucket"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-02-11 16:04" pubdate>
          February 11, 2024 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          330 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          3 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">Improving Git Flow for Managing Private TypeScript Dependencies on Bitbucket</h1>
            
            
              <div class="markdown-body">
                
                <p>In our current workflow, Bitbucket serves both as a code repository and a private NPM repository. Installing dependencies via <code>git+ssh</code> and specifying a <code>tag</code> is very convenient for pure JavaScript projects.</p>
<p>As some dependencies started using TypeScript, we need to manage them in one of the following ways:</p>
<ol>
<li>Directly commit the compiled <code>dist</code> files to the main&#x2F;master branch.</li>
<li>Compile during <code>postinstall</code>. Upon dependency installation, it automatically compiles.</li>
</ol>
<p>However, both methods have their drawbacks.</p>
<ul>
<li>Directly committing <code>dist</code> to the main branch adds many extra files during code review, making the project structure less elegant.</li>
<li>Using <code>postinstall</code> requires installing <code>typescript</code> additionally for pure JavaScript projects, which is also not elegant.</li>
</ul>
<p>Considering the manpower and repository migration costs (we have nearly 100 dependencies, each with many versions and used by different services), we can only address these issues by improving Git flow.</p>
<h2 id="Objectives"><a href="#Objectives" class="headerlink" title="Objectives"></a>Objectives</h2><p>The redesigned Git flow should meet the following objectives:</p>
<ol>
<li>Development branches should not contain compiled <code>dist</code> files.</li>
<li>Compilation should not rely on <code>postinstall</code>.</li>
<li>Dependency installation should remain unchanged, still via <code>git+ssh</code> and specifying <code>tag</code>.</li>
<li>Consideration for <code>hotfix</code> scenarios.</li>
</ol>
<h2 id="Improved-Git-Flow"><a href="#Improved-Git-Flow" class="headerlink" title="Improved Git Flow"></a>Improved Git Flow</h2><p>To achieve the above objectives, here is the improved Git flow:<br><img src="/en/images/2024/improved-git-flow.jpg" srcset="/en/img/loading.gif" lazyload alt="Improved Git Flow"></p>
<p>For regular development, after merging code into <code>master</code>, we first push the <code>src</code> tag and modify <code>.gitignore</code> to temporarily create a <code>build</code> branch. Then, we compile on the <code>build</code> branch and tag it formally, including the <code>dist</code> files, which can be referenced by other services.</p>
<p>When a <code>hotfix</code> is needed, we can branch off from the corresponding <code>src</code> tag to fix and then merge back into the <code>master</code> branch following the same steps.</p>
<h2 id="Pipeline-Script-Configuration"><a href="#Pipeline-Script-Configuration" class="headerlink" title="Pipeline Script Configuration"></a>Pipeline Script Configuration</h2><p>The Git flow described above involves tagging, modifying <code>.gitignore</code>, compiling, and then releasing after code merges. Even with documentation, it’s prone to errors in practice. Thus, it’s crucial to automate these steps using <a target="_blank" rel="noopener" href="https://support.atlassian.com/bitbucket-cloud/docs/build-test-and-deploy-with-pipelines/">Bitbucket Pipeline</a> upon merging code into the <code>master</code> branch.</p>
<p>Here is an example:</p>
<ol>
<li>Pipeline section:</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">branches:</span><br>  <span class="hljs-attr">master:</span> <span class="hljs-comment"># Trigger only when merging into the main branch</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-attr">step:</span><br>        <span class="hljs-attr">name:</span> <span class="hljs-string">build</span><br>        <span class="hljs-attr">deployment:</span> <span class="hljs-string">Build</span> <span class="hljs-comment"># Execute as Deployment, the name can be arbitrary</span><br>        <span class="hljs-attr">script:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">remote</span> <span class="hljs-string">set-url</span> <span class="hljs-string">origin</span> <span class="hljs-string">$&#123;BITBUCKET_GIT_SSH_ORIGIN&#125;</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-string">./scripts/build.sh</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Tagging and compilation script:</li>
</ol>
<p>The build.sh script in the pipeline is the core of the Git flow. It tags the source, compiles, and pushes the compiled formal tag.</p>
<p>The version of the tag follows semver rules, with the current tag being fetched from package.json’s version. The next version is derived from the prefix of the branch name, e.g., for major&#x2F;xxxx, the next version increments the major version; for feature&#x2F;xxx, it increments the minor version. It uses npm version command to upgrade the tag.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/usr/bin/env bash</span><br><br><span class="hljs-built_in">set</span> -e<br><span class="hljs-comment"># Create tags in the bitbucket pipline, env from bitbucket pipeline</span><br>source_branch=$(git <span class="hljs-built_in">log</span> --format=%B -n 1 <span class="hljs-variable">$BITBUCKET_COMMIT</span> | awk <span class="hljs-string">&#x27;&#123;print $3&#125;&#x27;</span>)<br><br><span class="hljs-keyword">if</span> [[ -n <span class="hljs-variable">$source_branch</span> ]]; <span class="hljs-keyword">then</span><br>  <span class="hljs-comment"># PART 1: Get the next tag</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Triggered by pull request <span class="hljs-variable">$&#123;source_branch&#125;</span>&quot;</span><br><br>  <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$&#123;source_branch&#125;</span> == feature/* ]]; <span class="hljs-keyword">then</span><br>    level=minor<br>  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$&#123;source_branch&#125;</span> == bugfix/* ]]; <span class="hljs-keyword">then</span><br>    level=patch<br>  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$&#123;source_branch&#125;</span> == hotfix/* ]]; <span class="hljs-keyword">then</span><br>    level=prerelease<br>  <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$&#123;source_branch&#125;</span> == major/* ]]; <span class="hljs-keyword">then</span><br>    level=major<br>  <span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Nothing happen on branch: <span class="hljs-variable">$&#123;BITBUCKET_BRANCH&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Source branch: <span class="hljs-variable">$&#123;source_branch&#125;</span>&quot;</span><br>  <span class="hljs-keyword">fi</span><br><br>  <span class="hljs-keyword">if</span> [[ ! -z <span class="hljs-variable">$&#123;level&#125;</span> ]]; <span class="hljs-keyword">then</span><br>    <span class="hljs-comment"># PART 2: Create src-tag and push back</span><br>    current_version=$(node -e <span class="hljs-string">&quot;console.log(require(&#x27;./package.json&#x27;).version)&quot;</span>) &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Current version - <span class="hljs-variable">$&#123;current_version&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Crated version on branch: <span class="hljs-variable">$&#123;BITBUCKET_BRANCH&#125;</span>. Tag: <span class="hljs-variable">$&#123;current_version&#125;</span>&quot;</span><br><br>    next_version=$(npx semver <span class="hljs-variable">$&#123;current_version&#125;</span> -i <span class="hljs-variable">$&#123;level&#125;</span>)<br>    source_tag=v<span class="hljs-variable">$&#123;next_version&#125;</span>-src<br><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Build source tag: <span class="hljs-variable">$&#123;source_tag&#125;</span> on branch: <span class="hljs-variable">$&#123;BITBUCKET_BRANCH&#125;</span>&quot;</span><br>    <span class="hljs-comment"># Create the source tag and push back</span><br>    npm version <span class="hljs-variable">$&#123;next_version&#125;</span> --no-git-tag-version <span class="hljs-comment"># This will not create a git tag just update the version in the package.json</span><br><br>    git add --all<br>    git commit -m <span class="hljs-string">&quot;[skip ci] <span class="hljs-variable">$&#123;current_version&#125;</span> --&gt; <span class="hljs-variable">$&#123;next_version&#125;</span>&quot;</span> <span class="hljs-comment"># [skip ci] Will not trigger this pipeline again</span><br>    git tag -am <span class="hljs-string">&quot;[skip ci] source tag: <span class="hljs-variable">$&#123;source_tag&#125;</span>&quot;</span> <span class="hljs-variable">$&#123;source_tag&#125;</span><br>    git push origin <span class="hljs-variable">$&#123;BITBUCKET_BRANCH&#125;</span> <span class="hljs-variable">$&#123;source_tag&#125;</span><br><br>    <span class="hljs-comment"># PART 3: Add the dist folder and create release tag</span><br>    <span class="hljs-comment"># Add the dist folder</span><br>    sed -i <span class="hljs-string">&#x27;s/dist//g&#x27;</span> .gitignore<br><br>    <span class="hljs-comment"># build ts</span><br>    npm run build<br><br>    <span class="hljs-comment"># push to tag</span><br>    git add --all<br>    git commit -m <span class="hljs-string">&quot;[skip ci] Build release tag: <span class="hljs-variable">$&#123;next_version&#125;</span> on branch: <span class="hljs-variable">$&#123;BITBUCKET_BRANCH&#125;</span>&quot;</span><br>    git tag -am <span class="hljs-string">&quot;[skip ci] release tag: <span class="hljs-variable">$&#123;next_version&#125;</span>&quot;</span> <span class="hljs-variable">$&#123;next_version&#125;</span> <span class="hljs-comment"># only push the tag</span><br>    git push origin refs/tags/<span class="hljs-variable">$&#123;next_version&#125;</span><br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>It’s recommended to execute Shell scripts within the Deployment section because it’s a blocking queue, ensuring only one script runs at a time, thus avoiding tag duplication issues.</p><p>Also, certain naming restrictions should be imposed on development branches, for instance, using tools like Husky.</p>
          </div>

<h2 id="Expansion"><a href="#Expansion" class="headerlink" title="Expansion"></a>Expansion</h2><p>This Git flow can be applied in any code hosting tool, even without triggering methods like Pipeline&#x2F;GitAction; it can still be achieved by running scripts. It also enables automatic tagging.</p>
<p>Although there’s no perfect Git flow, a suitable one can standardize our work and enhance efficiency.</p>
<p>(Translated by ChatGPT)</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/en/categories/Program-learning/" class="category-chain-item">Program learning</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/en/tags/git/" class="print-no-link">#git</a>
      
        <a href="/en/tags/npm/" class="print-no-link">#npm</a>
      
        <a href="/en/tags/nodejs/" class="print-no-link">#nodejs</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Improving Git Flow for Managing Private TypeScript Dependencies on Bitbucket</div>
      <div>https://konta9.github.io/en/2024/02/11/2024/improve-git-flow-to-manage-ts-dependency-on-bitbucket-as-private-npm/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Konata</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>February 11, 2024</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/en/2024/02/28/2024/a-simple-direction-animation-by-vue3/" title="Implementing a Simple Direction Animation with Vue3">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Implementing a Simple Direction Animation with Vue3</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/en/2024/01/17/2024/update-hexo-i18n/" title="hexo i18n support transformation">
                        <span class="hidden-mobile">hexo i18n support transformation</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script>
        Fluid.utils.loadComments('#disqus_thread', function() {
          Fluid.utils.createCssLink('https://lib.baomitu.com/disqusjs/1.3.0/disqusjs.css');
          Fluid.utils.createScript('https://lib.baomitu.com/disqusjs/1.3.0/disqus.js', function() {
            new DisqusJS({
              shortname: 'konata-blog',
              apikey: 'AlTcCrDugoy7nYInPZA5SdHFdvQxfiUdMNuifiFG54hy9yqNHkj7wUrRFuJXmBrv'
            });
          });
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/en/js/events.js" ></script>
<script  src="/en/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/en/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/en/js/leancloud.js" ></script>

  <script  src="/en/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/en/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
